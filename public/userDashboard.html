<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/userDashboard.css" />
    <title>CampusCrave Dashboard</title>

    <style>
        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Body and General Styles */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1e2939; /* Changed background color */
            color: white; /* Ensure text is visible against dark background */
            transition: margin-left 0.3s;
        }

        /* Navbar Button for Opening the Menu */
        .open-btn {
            font-size: 24px;
            padding: 10px;
            cursor: pointer;
            background-color: #FF6a3d;
            color: white;
            border: none;
            border-radius: 5px;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            transition: background-color 0.3s ease;
        }

        .open-btn:hover {
            background-color: #FF6a3d;
        }

        /* Slide-Out Menu */
        .sidenav {
            height: 100%; /* Full-height: Cover the whole page */
            width: 0; /* Initially hidden */
            position: fixed;
            top: 0;
            left: 0;
            background-color: #1e2939; /* Dark background for the menu */
            overflow-x: hidden; /* Disable horizontal scroll */
            transition: 0.3s; /* Transition effect for menu */
            padding-top: 60px; /* Space for top content */
            z-index: 101;
        }

        /* Menu Links */
        .sidenav a {
            padding: 15px 30px;
            text-decoration: none;
            font-size: 18px;
            color: white;
            display: block;
            transition: background-color 0.2s ease;
        }
        

        .sidenav a:hover {
            background-color: #FF6a3d;
            color: white;
        }

        /* Close Button */
        .sidenav .close-btn {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
            color: white;
            cursor: pointer;
        }


        /* Content to slide over when the menu is open */
        .content {
            padding: 0px 20px;
            transition: margin-left 0.3s ease;
            text-align: left; /* Aligns content with the navigation bar */
        }

        /* For smaller screens */
        @media (max-height: 450px) {
            .sidenav {padding-top: 15px;}
            .sidenav a {font-size: 16px;}
        }
    </style><div id="sidenav" class="sidenav">
      <span class="close-btn" onclick="closeNav()">&times;</span>
      <a href="userDashboard.html">Home</a>
      <a href="alerts.html">Alerts</a>
      <a href="notification.html">Maintenance Notification</a>
      <a href="userProfile.html">Manage Account</a>
      <a href="login.html">Logout</a>
  </div>
</head>
<body>
    <!-- Button to open the side navigation -->
    <button class="open-btn" onclick="openNav()">☰</button>

    <!-- Slide-Out Navigation Menu -->
    <div id="sidenav" class="sidenav">
      <span class="close-btn" onclick="closeNav()">&times;</span>
      <a href="userDashboard.html">Home</a> <!-- Home is now userDashboard.html -->
      <a href="alerts.html">Alerts</a>
      <a href="maintenanceNotification.html">Maintenance Notification</a>
      <a href="userProfile.html">Manage Account</a> <!-- Manage Account is now userprofile.html -->
      <a href="login.html">Logout</a> <!-- Updated Logout link -->

  </div>

    <div class="container"><a href="" onclick="logout()"></a> <!-- Updated Logout link -->
      <main>
        <!-- Main Content -->
        <div class="content" id="mainContent">
          <h1>Welcome to Campus Crave, <span id="username">User</span>!</h1>
            <p>Your dining experience, made easy. Explore, reserve, and enjoy—delicious moments are just a tap away!</p>
        </div>
        <div class="dashboard">
          <div class="grid">
            <div class="grid-item" onclick="window.location.href='menu.html'">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"
                />
              </svg>
              Menu
            </div>
            <div
              class="grid-item"
              onclick="window.location.href='mealCredit.html'"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"
                />
              </svg>
              Meal Credits<br />Management
            </div>
            <div
              class="grid-item"
              onclick="window.location.href='dietary_plan.html'"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"
                />
              </svg>
              Dietary<br />Preference
            </div>
            <div
              class="grid-item"
              onclick="window.location.href='diningHalls.html'"
            >
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"
                />
              </svg>
              Reservation
            </div>
          </div>
        </div>
      </main>
      <footer class="footer">
        <div class="footer-item" onclick="window.location.href='feedback.html'">
          Feedback
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm0-4h-2V7h2v8z"
            />
          </svg>
        </div>
        <div class="footer-item" onclick="window.location.href='dining_information.html'">
          Dining Information
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm0-4h-2V7h2v8z"
            />
          </svg>
        </div>
      </footer>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
          // Fetch the logged-in user's username from the backend
          fetch('/get-username', {
              method: 'GET',
              headers: {
                  'Content-Type': 'application/json',
                  'Authorization': `Bearer ${localStorage.getItem('token')}` // if you're using JWT
              }
          })
          .then(response => {
              if (!response.ok) {
                  throw new Error('Network response was not ok');
              }
              return response.json();
          })
          .then(data => {
              // Update the span with the user's username
              const usernameSpan = document.getElementById('username');
              usernameSpan.textContent = data.username;
          })
          .catch(error => {
              console.error('There was a problem with the fetch operation:', error);
          });
      });

      // Function to open the side navigation
      function openNav() {
          document.getElementById("sidenav").style.width = "250px"; // Set width to 250px
          document.body.style.marginLeft = "250px"; // Shift content to the right
      }

      // Function to close the side navigation
      function closeNav() {
          document.getElementById("sidenav").style.width = "0"; // Hide the menu
          document.body.style.marginLeft = "0"; // Reset content margin
      }
  </script>
</body>
</html>
