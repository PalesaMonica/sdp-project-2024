
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modify Reservation</title>
  <link rel="stylesheet" href="css/MainDiningHall.css" />
  <style>
    body {
      background: #1A2238;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .container {
      margin: 20px auto;
      padding: 20px;
      background: #2a3748;
      border-radius: 8px;
      width: 80%;
      max-width: 600px;
    }
    h1, h2 {
      color: #f5f5f5;
    }
    .meal-selection label, .time-slot label, .date-selection label, .dining-hall-selection label {
      display: block;
      margin: 8px 0;
    }
    .meal-selection input[type="checkbox"] {
      margin-right: 10px;
    }
    .time-slot, .date-selection, .dining-hall-selection {
      margin-top: 10px;
    }
    .time-slot select, .date-selection input, .dining-hall-selection select {
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background: #fff;
      width: 100%;
    }
    .button-container {
      margin-top: 20px;
    }
    .button-container button {
      padding: 10px;
      background: #007BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
      margin-bottom: 10px;
    }
    .button-container button:hover {
      background: #f15d18;
    }
    .error-message {
      color: red;
      margin-top: 10px;
    }
    .cost-summary {
      margin-top: 20px;
      color: #f5f5f5;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Modify Your Reservation</h1>
    <div class="error-message" id="error-message"></div>

    <div class="meal-selection">
      <label>
        <input type="checkbox" id="breakfast-checkbox" onchange="updateCost()">
        Breakfast
      </label>
      <div id="breakfast-time-slot" class="time-slot" style="display: none;">
        <label for="breakfast-time">Time Slot:</label>
        <select id="breakfast-time" name="breakfast-time">
          <option value="08:00-09:00">08:00-09:00</option>
          <option value="09:00-10:00">09:00-10:00</option>
        </select>
      </div>
      
      <label>
        <input type="checkbox" id="lunch-checkbox" onchange="updateCost()">
        Lunch
      </label>
      <div id="lunch-time-slot" class="time-slot" style="display: none;">
        <label for="lunch-time">Time Slot:</label>
        <select id="lunch-time" name="lunch-time">
          <option value="12:00-13:00">12:00-13:00</option>
          <option value="13:00-14:00">13:00-14:00</option>
        </select>
      </div>

      <label>
        <input type="checkbox" id="dinner-checkbox" onchange="updateCost()">
        Dinner
      </label>
      <div id="dinner-time-slot" class="time-slot" style="display: none;">
        <label for="dinner-time">Time Slot:</label>
        <select id="dinner-time" name="dinner-time">
          <option value="18:00-19:00">18:00-19:00</option>
          <option value="19:00-20:00">19:00-20:00</option>
        </select>
      </div>
    </div>

    <div class="date-selection">
      <label for="date">Change Date (optional):</label>
      <input type="date" id="date" name="date" />
    </div>

    <div class="dining-hall-selection">
      <label for="dining-hall">Change Dining Hall (optional):</label>
      <select id="dining-hall" name="dining-hall">
        <option value="">Select a dining hall</option>
        <option value="hall1">Main Dining Hall</option>
        <option value="hall2">Convocation Dining Hall</option>
        <option value="hall3">Jubilee Dining Hall</option>
      </select>
    </div>

    <div class="cost-summary">
      <h2>Total Cost: <span id="total-cost">R0.00</span></h2>
    </div>

    <div class="button-container">
      <button onclick="submitChanges()">Submit Changes</button>
    </div>
  </div>

  <script>
    const mealPrices = {
      breakfast: 80.00,
      lunch: 90.00,
      dinner: 110.00
    };

    function toggleTimeSlot(mealType) {
      const checkbox = document.getElementById(`${mealType}-checkbox`);
      const timeSlotDiv = document.getElementById(`${mealType}-time-slot`);
      timeSlotDiv.style.display = checkbox.checked ? 'block' : 'none';
    }

    function updateCost() {
      let totalCost = 0;

      if (document.getElementById('breakfast-checkbox').checked) {
        totalCost += mealPrices.breakfast;
      }
      if (document.getElementById('lunch-checkbox').checked) {
        totalCost += mealPrices.lunch;
      }
      if (document.getElementById('dinner-checkbox').checked) {
        totalCost += mealPrices.dinner;
      }

      document.getElementById('total-cost').textContent = `R${totalCost.toFixed(2)}`;
    }

    function submitChanges() {
      const now = new Date();
      const selectedDate = new Date(document.getElementById('date').value);
      const cutoffTime = new Date(selectedDate);
      cutoffTime.setDate(cutoffTime.getDate() - 1);
      cutoffTime.setHours(21, 0, 0, 0); // 21:00 the day before

      if (selectedDate < now || (now > cutoffTime && document.getElementById('date').value !== '')) {
        document.getElementById('error-message').textContent = 'Reservations cannot be made or modified on the same day or after the cutoff time (21:00 the day before collection).';
        return;
      }

      // Collect reservation data
      const breakfastChecked = document.getElementById('breakfast-checkbox').checked;
      const lunchChecked = document.getElementById('lunch-checkbox').checked;
      const dinnerChecked = document.getElementById('dinner-checkbox').checked;
      const breakfastTime = document.getElementById('breakfast-time').value;
      const lunchTime = document.getElementById('lunch-time').value;
      const dinnerTime = document.getElementById('dinner-time').value;
      const newDate = document.getElementById('date').value;
      const diningHall = document.getElementById('dining-hall').value;

      const reservationDetails = {
        date: newDate,
        diningHall: diningHall,
        meals: {
          breakfast: breakfastChecked ? breakfastTime : null,
          lunch: lunchChecked ? lunchTime : null,
          dinner: dinnerChecked ? dinnerTime : null
        }
      };

      console.log('Modified Reservation Details:', reservationDetails);

      // Simulate form submission and redirect to updatedreservation.html
      window.location.href = 'updatedreservation.html';
    }

    // Add event listeners to toggle time slots and update cost
    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        toggleTimeSlot(checkbox.id.split('-')[0]);
        updateCost();
      });
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modify Reservation</title>
    <link rel="stylesheet" href="css/modifyreservation.css" />
    <style></style>
  </head>
  <body>
    <header class="main-header"></header>
      <div class="logo">
        <img src="images/option-21.svg" alt="CampusCrave" />
        <h1>Campus<span class="highlight">Crave</span></h1>
      </div>
      <button class="back-button" onclick="window.history.back()">Back</button>
    </header>
    <div class="container">
      <h1>Modify Your Reservation</h1>
      <div class="error-message" id="error-message"></div>

      <div class="meal-selection">
        <label>
          <input
            type="checkbox"
            id="breakfast-checkbox"
            onchange="toggleTimeSlot('breakfast')"
          />
          Breakfast
        </label>
        <div id="breakfast-time-slot" class="time-slot" style="display: none">
          <label for="breakfast-time">Time Slot:</label>
          <select id="breakfast-time" name="breakfast-time">
            <option value="08:00-09:00">08:00-09:00</option>
            <option value="09:00-10:00">09:00-10:00</option>
          </select>
        </div>

        <label>
          <input
            type="checkbox"
            id="lunch-checkbox"
            onchange="toggleTimeSlot('lunch')"
          />
          Lunch
        </label>
        <div id="lunch-time-slot" class="time-slot" style="display: none">
          <label for="lunch-time">Time Slot:</label>
          <select id="lunch-time" name="lunch-time">
            <option value="12:00-13:00">12:00-13:00</option>
            <option value="13:00-14:00">13:00-14:00</option>
          </select>
        </div>

        <label>
          <input
            type="checkbox"
            id="dinner-checkbox"
            onchange="toggleTimeSlot('dinner')"
          />
          Dinner
        </label>
        <div id="dinner-time-slot" class="time-slot" style="display: none">
          <label for="dinner-time">Time Slot:</label>
          <select id="dinner-time" name="dinner-time">
            <option value="18:00-19:00">18:00-19:00</option>
            <option value="19:00-20:00">19:00-20:00</option>
          </select>
        </div>
      </div>

      <div class="date-selection">
        <label for="date">Change Date (optional):</label>
        <input type="date" id="date" name="date" />
      </div>

      <div class="dining-hall-selection">
        <label for="dining-hall">Change Dining Hall (optional):</label>
        <select id="dining-hall" name="dining-hall">
          <option value="">Select a dining hall</option>
          <!-- Replace with actual dining hall options from the server -->
          <option value="hall1">Main DH</option>
          <option value="hall2">Convocation DH</option>
          <option value="hall3">Jubilee DH</option>
        </select>
      </div>

      <div class="button-container">
        <button onclick="submitChanges()">Submit Changes</button>
      </div>
    </div>

    <script>
      function toggleTimeSlot(mealType) {
        const checkbox = document.getElementById(`${mealType}-checkbox`);
        const timeSlotDiv = document.getElementById(`${mealType}-time-slot`);
        timeSlotDiv.style.display = checkbox.checked ? "block" : "none";
      }

      function submitChanges() {
        const now = new Date();
        const selectedDate = new Date(document.getElementById("date").value);
        const cutoffTime = new Date(selectedDate);
        cutoffTime.setDate(cutoffTime.getDate() - 1);
        cutoffTime.setHours(21, 0, 0, 0); // 21:00 the day before

        if (
          selectedDate < now ||
          (now > cutoffTime && document.getElementById("date").value !== "")
        ) {
          document.getElementById("error-message").textContent =
            "Reservations cannot be made or modified on the same day or after the cutoff time (21:00 the day before collection).";
          return;
        }

        // Collect reservation data
        const breakfastChecked =
          document.getElementById("breakfast-checkbox").checked;
        const lunchChecked = document.getElementById("lunch-checkbox").checked;
        const dinnerChecked =
          document.getElementById("dinner-checkbox").checked;
        const breakfastTime = document.getElementById("breakfast-time").value;
        const lunchTime = document.getElementById("lunch-time").value;
        const dinnerTime = document.getElementById("dinner-time").value;
        const newDate = document.getElementById("date").value;
        const diningHall = document.getElementById("dining-hall").value;

        const reservationDetails = {
          date: newDate,
          diningHall: diningHall,
          meals: {
            breakfast: breakfastChecked ? breakfastTime : null,
            lunch: lunchChecked ? lunchTime : null,
            dinner: dinnerChecked ? dinnerTime : null,
          },
        };

        console.log("Modified Reservation Details:", reservationDetails);

        // Simulate form submission and redirect to updatedreservation.html
        window.location.href = "updatedreservation.html";
      }

      // Add event listeners to toggle time slots
      document
        .querySelectorAll('input[type="checkbox"]')
        .forEach((checkbox) => {
          checkbox.addEventListener("change", () =>
            toggleTimeSlot(checkbox.id.split("-")[0])
          );
        });
    </script>
  </body>
</html>

